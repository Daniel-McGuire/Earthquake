<!DOCTYPE HTML>
<html>
<head>
	<title>Earthquakes</title>
  <meta charset="utf-8" />
  <link rel="prefetch" type="application/l10n" href="l10n/locales.ini" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />  
  <link rel="stylesheet" type="text/css" href="css/headers.css" />
  <link rel="stylesheet" type="text/css" href="css/drawer.css" />
  <link rel="stylesheet" type="text/css" href="css/progress_activity.css" />    
  <link rel="stylesheet" type="text/css" href='http://api.tiles.mapbox.com/mapbox.js/v1.4.2/mapbox.css' />
	<link rel="stylesheet" type="text/css" href="css/app.css" />
  <link rel="stylesheet" type="text/css" href="css/symbols.css" />

	<script type="text/javascript" src="js/zepto.min.js"></script>
  <script type="text/javascript" src="js/later.min.js"></script>
  <script type="text/javascript" src='js/mapbox.js'></script>
  <script type="text/javascript" src="js/l10n.js"></script>
  <script type="text/javascript" src="js/iscroll.js"></script>
 	<script type="text/javascript" src="js/app.js"></script> 

  <style type="text/css" media="all">

/**
 *
 * Pull down styles
 *
 */
#pullDown, #pullUp {
  background:#fff;
  height:40px;
  line-height:40px;
  padding:5px 10px;
  border-bottom:1px solid #ccc;
  font-weight:bold;
  font-size:14px;
  color:#888;
}
#pullDown .pullDownIcon, #pullUp .pullUpIcon  {
  display:block; float:left;
  width:40px; height:40px;
  background:url(pull-icon@2x.png) 0 0 no-repeat;
  -webkit-background-size:40px 80px; background-size:40px 80px;
  -webkit-transition-property:-webkit-transform;
  -webkit-transition-duration:250ms;  
}
#pullDown .pullDownIcon {
  -webkit-transform:rotate(0deg) translateZ(0);
  -moz-transform: rotate(0deg) translateZ(0);
}
#pullUp .pullUpIcon  {
  -webkit-transform:rotate(-180deg) translateZ(0);
  -moz-transform:rotate(-180deg) translateZ(0);
}

#pullDown.flip .pullDownIcon {
  -webkit-transform:rotate(-180deg) translateZ(0);
  -moz-transform:rotate(-180deg) translateZ(0);
}

#pullUp.flip .pullUpIcon {
  -webkit-transform:rotate(0deg) translateZ(0);
  -moz-transform:rotate(0deg) translateZ(0);
}

#pullDown.loading .pullDownIcon, #pullUp.loading .pullUpIcon {
  background-position:0 100%;
  -webkit-transform:rotate(0deg) translateZ(0);
  -webkit-transition-duration:0ms;

  -webkit-animation-name:loading;
  -webkit-animation-duration:2s;
  -webkit-animation-iteration-count:infinite;
  -webkit-animation-timing-function:linear;
}

@-webkit-keyframes loading {
  from { -webkit-transform:rotate(0deg) translateZ(0); }
  to { -webkit-transform:rotate(360deg) translateZ(0); }
}

</style> 

</head>
<body>
<section id="menu" data-type="sidebar">
  <header>
    <h1 data-l10n-id="options">Options</h1>
  </header>
  <nav>        
    <h2 data-l10n-id="important">Important</h2>
    <ul>
        <li><a href="#" id="btn-last-earthqueaks" data-l10n-id="lastEarthqueaks"><i class="sy-earthquake i"></i>
            Last Earthquakes</a></li>
    </ul>
    <h2 data-l10n-id="tweets">Tweet Earthquake Dispatch</h2>
    <ul>
        <li><a href="#" id="btn-usgsted">@USGSted</a></li>
        <li><a href="#" id="btn-usgsbigquakes">@USGSBigQuakes</a></li>
    </ul>
    <h2 data-l10n-id="pastHour">Past Hour</h2>
    <ul>
        <li><a href="#" id="btn-sigEart-PastHour" data-geojson="significant_hour" data-l10n-id="sigEarthquakes"><i class="sy-earthquake i"></i>Significant Earthquakes</a></li>
        <li><a href="#" id="btn-M45-PastHour" data-geojson="4.5_hour" data-l10n-id="m45Erthquakes"><i class="sy-earthquake i"></i>M4.5+   Earthquakes</a></li>
        <li><a href="#" id="btn-M25-PastHour" data-geojson="2.5_hour" data-l10n-id="m25Earthquakes"><i class="sy-earthquake i"></i>M2.5+ Earthquakes</a></li>
        <li><a href="#" id="btn-M10-PastHour" data-geojson="1.0_hour" data-l10n-id="m10Earthquakes"><i class="sy-earthquake i"></i>M1.0+ Earthquakes</a></li>
        <li><a href="#" id="btn-allEart-PastHour" data-geojson="all_hour" data-l10n-id="allEarthquakes"><i class="sy-earthquake i"></i>All Earthquakes</a></li>
      </ul>
      <h2 data-l10n-id="pastDay">Past Day</h2>
      <ul>
        <li><a href="#" id="btn-sigEart-PastDay" data-geojson="significant_day" data-l10n-id="sigEarthquakes"><i class="sy-earthquake i"></i>Significant Earthquakes</a></li>
        <li><a href="#" id="btn-M45-PastDay" data-geojson="4.5_day" data-l10n-id="m45Erthquakes"><i class="sy-earthquake i"></i>M4.5+ Earthquakes</a></li>
        <li><a href="#" id="btn-M25-PastDay" data-geojson="2.5_day" data-l10n-id="m25Earthquakes"><i class="sy-earthquake i"></i>M2.5+ Earthquakes</a></li>
        <li><a href="#" id="btn-M10-PastDay" data-geojson="1.0_day" data-l10n-id="m10Earthquakes"><i class="sy-earthquake i"></i>M1.0+ Earthquakes</a></li>
        <li><a href="#" id="btn-allEart-PastDay" data-geojson="all_day" data-l10n-id="allEarthquakes"><i class="sy-earthquake i"></i>All Earthquakes</a></li>
      </ul>
      <!--h2 data-l10n-id="past7Days">Past 7 Days</h2>
      <ul>
        <li><a href="#" id="btn-sigEart-Past7Days" data-geojson="significant_week" data-l10n-id="sigEarthquakes">Significant Earthquakes</a></li>
        <li><a href="#" id="btn-M45-Past7Days" data-geojson="4.5_week" data-l10n-id="m45Erthquakes">M4.5+ Earthquakes</a></li>
        <li><a href="#" id="btn-M25-Past7Days" data-geojson="2.5_week" data-l10n-id="m25Earthquakes">M2.5+ Earthquakes</a></li>
        <li><a href="#" id="btn-M10-Past7Days" data-geojson="1.0_week" data-l10n-id="m10Earthquakes">M1.0+ Earthquakes</a></li>
        <li><a href="#" id="btn-allEart-Past7Days" data-geojson="all_week" data-l10n-id="allEarthquakes">All Earthquakes</a></li>
      </ul>
      <h2 data-l10n-id="past30Days">Past 30 Days</h2>
      <ul>
        <li><a href="#" id="btn-sigEart-Past30Days" data-geojson="significant_month" data-l10n-id="sigEarthquakes">Significant Earthquakes</a></li>
        <li><a href="#" id="btn-M45-Past30Days" data-geojson="4.5_month" data-l10n-id="m45Erthquakes">M4.5+ Earthquakes</a></li>
        <li><a href="#" id="btn-M25-Past30Days" data-geojson="2.5_month" data-l10n-id="m25Earthquakes">M2.5+ Earthquakes</a></li>
        <li><a href="#" id="btn-M10-Past30Days" data-geojson="1.0_month" data-l10n-id="m10Earthquakes">M1.0+ Earthquakes</a></li>
        <li><a href="#" id="btn-allEart-Past30Days" data-geojson="all_month" data-l10n-id="allEarthquakes">All Earthquakes</a></li>
      </ul-->
      <h2 data-l10n-id="moreInfo">More Info</h2>
      <ul>
        <li><a href="#" id="btn-aboutApp" data-l10n-id="aboutApp"><i class="sy-info i"></i>About App</a></li>
      </ul>
  </nav>
</section>
<section id="drawer" role="region">
  <header>
    <a href="#"><span class="icon icon-menu">hide sidebar</span></a>
    <a href="#drawer"><span class="icon icon-menu">show sidebar</span></a>
    <h1 data-l10n-id="earthquakes">Earthquakes</h1>
  </header>
  <div role="main">
    <div id="message"></div>
    <div id="usgsted" class="twitterContent">     
      <progress class="preloadUsgsted"></progress>
      <div id="wrapper">        
        <div id="scroller">
          <div id="pullDown">
            <span class="pullDownIcon"></span><span class="pullDownLabel">Pull down to refresh...</span>
          </div>
          <ul id="tweetsUsgsted">
          </ul>          
        </div>
      </div>
    </div>
    <div id="usgsbigquakes" class="twitterContent">        
      <progress class="preloadUsgsbigquakes"></progress> 
      <ul id="tweetsUSGSBigQuakes">
      </ul>
    </div>
    <div id="contentEarthqueaks">          
        <progress class="preload"></progress>
        <ul id="listEarthqueaks">
        <ul>
    </div>    
    <div id="map"></div>
    <div id="aboutApp">
      <p><strong><span data-l10n-id="aboutAppImport">Importante</span></strong></p>
      <p><span data-l10n-id="aboutAppExServ">Esta aplicación que usa un servicio externo:</span></p>
      <p>
         <a class="urlBoton" href="http://earthquake.usgs.gov/" target="_blank"><i class="sy-external-link i"></i>http://earthquake.usgs.gov/</a>
      </p>
      <p><strong><span data-l10n-id="aboutAppAuthor">Autor</span></strong></p>
      <p><a class="urlBoton" href="https://reps.mozilla.org/u/Willy/" target="_blank"><i class="sy-external-link i"></i>Willy Aguirre</a> <a class="urlBoton" href="http://mozilla.pe/" target="_blank"><i class="sy-external-link i"></i>Mozilla Perú</a></p>
      <p><strong><span data-l10n-id="aboutAppCodApp">Código de la aplicación</span></strong></p>
      <p><span data-l10n-id="aboutAppProjIssue">Proyecto y peticiones</span> <a class="urlBoton" href="https://github.com/marti1125/Earthquake" target="_blank"><i class="sy-external-link i"></i>GitHub</a></p>
    </div>
  </div>
</section>
<script type="text/javascript">

var myScroll,
  pullDownEl, pullDownOffset,
  pullUpEl, pullUpOffset;

function pullDownAction () {
  setTimeout(function () { 
     document.getElementById('scroller').style.transform = 'translate(0px, -63px) scale(1) translateZ(0px)';  
    myScroll.refresh();
  }, 1000);
}

function pullUpAction () {
  setTimeout(function () { // <-- Simulate network congestion, remove setTimeout from production!
    myScroll.refresh();   // Remember to refresh when contents are loaded (ie: on ajax completion)
  }, 1000); // <-- Simulate network congestion, remove setTimeout from production!
}

function loaded() {
    pullDownEl = document.getElementById('pullDown');
    pullDownOffset = pullDownEl.offsetHeight;

    myScroll = new iScroll('wrapper', {

      useTransition: true,
      topOffset: pullDownOffset,
      onRefresh: function () {       
        if (pullDownEl.className.match('loading')) {
          pullDownEl.className = '';
          pullDownEl.querySelector('.pullDownLabel').innerHTML = 'Pull down to refresh...';
        }
      },
      onScrollMove: function () {
        //alert(this.y )
        if (this.y > 5 && !pullDownEl.className.match('flip')) {
          pullDownEl.className = 'flip';
          pullDownEl.querySelector('.pullDownLabel').innerHTML = 'Release to refresh...';
          this.minScrollY = 0;
        } else if (this.y < 5 && pullDownEl.className.match('flip')) {
          pullDownEl.className = '';
          pullDownEl.querySelector('.pullDownLabel').innerHTML = 'Pull down to refresh...';
          this.minScrollY = -pullDownOffset;
        }
      },
      onScrollEnd: function () {
        if (pullDownEl.className.match('flip')) {
          pullDownEl.className = 'loading';
          pullDownEl.querySelector('.pullDownLabel').innerHTML = 'Loading...';        
          pullDownAction(); // Execute custom function (ajax call?)
        }
      }

    });   

    setTimeout(function () { document.getElementById('wrapper').style.left = '0'; }, 800); 
    document.getElementById('scroller').style.transform = 'translate(0px, -63px) scale(1) translateZ(0px)';  
}

document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);

document.addEventListener('DOMContentLoaded', function () { setTimeout(loaded, 200); }, false);
</script>
</body>
</html>